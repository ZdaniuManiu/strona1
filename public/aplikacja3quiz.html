<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            background-color: rgb(163, 217, 229);
            text-align: center;
            font-size: 25px;
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
            overflow-y: scroll;
            overflow-x: hidden;
        }

        .start-btn-container button {
            position: absolute;
            left: 50.3%;
            top: 2%;
            transform: translate(-51%, -2%);
            border-radius: 5px;
            background-color: rgb(255, 255, 255);
            cursor: pointer;
            width: fit-content;
            transition: all .2s ease-in-out;
            font-size: large;
        }

        .start-btn-container button:hover {
            background-color: rgb(0, 244, 102);
            border-radius: 10px;
        }

        .start-btn-container button:hover:disabled {
            background-color: rgb(181, 166, 166);
            cursor: not-allowed;
            border-radius: unset;
        }

        .quiz-container {
            display: none;
            margin-top: 50px;
            justify-content: center;
            height: 40vh;
            width: 600px;
            flex-wrap: wrap;
        }

        p {
            height: fit-content;
            width: inherit;
            margin-top: 10px;

        }

        input {
            display: flex;
            flex-wrap: wrap;
            width: 20px;
            margin-top: 25px;
        }

        .input-container {
            display: block;
            width: 600px;
            height: fit-content;
        }

        .input-container1 {
            width: inherit;
            margin-left: 20px;
        }


        .option {
            display: flex;
            align-items: center;
            align-content: center;
            margin-bottom: 40px;
        }

        .option input {
            align-items: center;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .option input::selection {
            color: blue;
            size: 20px;
        }

        input[type="radio"]:checked {
            color: white;
        }

        .option label:hover {
            background-color: rgb(120, 194, 210);
        }

        .option label {
            display: flex;
            width: fit-content;
            padding: 1px;
            border: 1px solid rgba(0, 0, 0, 0.074);
            border-radius: 3px;
            cursor: pointer;
        }

        .bottom-btn-container button:hover {
            background-color: rgb(0, 244, 102);
            padding: 5px 10px;
            border-radius: 20px;
        }

        .bottom-btn-container button {
            display: inline-flex;
            border-radius: 10px;
            background-color: rgb(255, 255, 255);
            cursor: pointer;
            width: fit-content;
            transition: all .2s ease-in-out;
            font-size: large;
        }

        #next-btn {
            display: inline-flex;
        }

        .score {
            display: none;
            margin: 20%;
        }

        #wyswietl-odp {
            left: 80%;
        }

        img {
            width: 550px;
            height: 550px;
            margin-bottom: 30px;
            margin-left: 40px;
        }

        #timer {
            position: absolute;
            top: 2%;
            right: 20%;
            font-size: 20px;
        }

        #time {
            position: absolute;
            top: 5%;
            right: 20%;
            font-size: 20px;
            color: rgb(0, 0, 0);
        }
        .bottom-buttons{
            margin-bottom: 20px;
        }
        .powrot-button{
            position: absolute;
            left: 1%;
        }
        .powrot-button button{
            padding: 30px;
            border-radius: 5px;
            background-color: greenyellow;
        }
        @media (max-width:600px) {
            body {
                width: 80%;
            }

            p {
                margin-left: 15px;
            }

            .quiz-container {
                display: none;
                width: 300px;
                flex-wrap: wrap;
                margin-left: 15px;
                font-size: large;
            }

            .hide-quiz-container {
                width: 400px;
            }

            .start-btn-container button:hover {
                background-color: white;
                border-radius: 5px;
            }

            .start-btn-container button:disabled {
                background-color: grey;
            }

            .bottom-btn-container button:hover {
                background-color: none;
            }

            #wyswietl-odp {
                position: absolute;
                left: 80%;
                top: 2%;
                /*transform: translate(-80%,10%);*/

            }

            #poprzednia-odp {
                position: absolute;
                left: 16%;
                top: 2%;
                /*transform: translate(-80%,10%);*/
                width: 100px;
            }

            .start-btn-container button {
                left: 47.4%;
            }

            .input-container {
                width: 400px;
            }

            img {
                height: 250px;
                width: 300px;
            }

            #next-btn {
                margin-bottom: 20px;
                margin-left: 40px;
            }

            #timer {
                position: absolute;
                top: 2%;
                right: 2%;
                font-size: 20px;
            }

            #time {
                position: absolute;
                top: 5%;
                right: 2%;
                font-size: 20px;
                color: rgb(0, 0, 0);
            }
        }

        @media(min-width:1080px) {
            #wyswietl-odp {
                position: absolute;
                left: 68%;
            }

            #poprzednia-odp {
                position: absolute;
                left: 36.5%;
            }
        }

        @media (prefers-color-scheme: light) {
            #next-btn {
                background-color: white;
                color: black
            }

            .start-btn-container button:hover {
                background-color: white;
                border-radius: 5px;
            }

            .start-btn-container button:disabled {
                background-color: grey;
            }

            .bottom-btn-container button:hover {
                background-color: none;
            }
        }
    </style>
</head>

<body>
    <a href="aplikacje.html" class="powrot-button"> <button> Powrot</button></a>
    <div class="start-btn-container">
        <button id="start-btn">Rozpocznij quiz</button>
        <button id="repeat-btn" hidden> Powtórz quiz</button>
        <button id="wyswietl-odp" hidden>Sprawdź odpowiedzi</button>
        <button id="poprzednia-odp" hidden>Zobacz poprzednia odpowiedz</button>
        <p id="timer" hidden>Pozostały czas:↓ </p>
        <p id="time" hidden></p>
    </div>
    <div class="quiz-container" id="quiz-container">
        <div class="hide-quiz-container" id="hide-quiz-container">
            <div class=" question-container">
                <p id="nr-pytania"></p>
                <p id="pytanie"></p>
            </div>

            <div class="input-container1">
                <div class="input-container">
                    <div class="option">

                        <input name="wybor" type="radio" value="0" id="wybor1">

                        <label for="wybor1" id="answer0"></label>


                    </div>
                    <div class="option">

                        <input name="wybor" type="radio" value="1" id="wybor2">

                        <label for="wybor2" id="answer1"></label>


                    </div>
                    <div class="option">

                        <input name="wybor" type="radio" value="2" id="wybor3">

                        <label for="wybor3" id="answer2"></label>


                    </div>
                    <div class="option" style="margin-bottom: 10px;">

                        <input name="wybor" type="radio" value="3" id="wybor4">

                        <label for="wybor4" id="answer3"></label>
                    </div>
                </div>
            </div>
        </div>
        <div class="bottom-btn-container">
            <img src="" id="zdjecie" hidden>
            <div class="bottom-buttons">
                <button id="end-btn" style="position: absolute; left: 47.5%;display: none;"
                    onclick="StopTimer()">Zakończ QUIZ</button>
                <button id="next-btn"> Kolejne pytanie</button>
            </div>
        </div>
    </div>
    <h1 class="score" id="score">TWÓJ WYNIK TO: </h1>








    <script>

        const pytania = [{
            pytanie: "Co oznacza skrót HTML?",
            //                              0                               1              2                  3
            answer: ["Hyper Transfer Machine Learning", "Hyper Text Markup Language", "Hot Mail", "Hyper Tool Modern Language"],
            correct: 1
        }, {
            pytanie: "Które z poniższych NIE jest językiem programowania?",
            //          0           1         2       3
            answer: ["JavaScript", "Python", "HTML", "Java"],
            image: "pytanie2.png",
            correct: 2
        }, {
            pytanie: "Czym jest console.log() w JavaScript?",
            //                    0                                   1                                            2                                     3
            answer: ["Funkcją do rysowania w konsoli", "Komendą do tworzenia nowych zmiennych", "Funkcją do debugowania i wypisywania danych", "Poleceniem do czyszczenia strony"],
            correct: 2
        }, {
            pytanie: "Która z metod JavaScript służy do dodawania elementu na koniec tablicy?",
            answer: ['shift()', 'push()', 'pop()', 'unshift()'],
            correct: 1
        }, {
            pytanie: "Jakie rozszerzenie ma plik arkusza stylów?",
            answer: ['.html', '.js', '.css', '.xml'],
            correct: 2
        }, {
            pytanie: "Który znacznik HTML służy do wstawiania obrazu?",
            answer: ['<image>', '<img>', '<pic>', '<src>'],
            correct: 1
        }, {
            pytanie: "Jak zadeklarować zmienną w JavaScript?",
            answer: ['let x = 5;', 'variable x = 5;', 'int x = 5;', 'x := 5;'],
            correct: 0
        }, {
            pytanie: "Czym jest CSS?",
            answer: ['Językiem programowania', 'Systemem baz danych', 'Językiem stylizacji stron', 'Frameworkiem JavaScript'],
            correct: 2
        }, {
            pytanie: "Która z tych funkcji służy do wypisania czegoś w konsoli?",
            answer: ['console.log()', 'print()', 'echo()', 'output()'],
            correct: 0
        }, {
            pytanie: "Jak załączyć plik CSS do HTML?",
            answer: ['<style href="style.css">', '<css src="style.css">', '<link rel="stylesheet" href="style.css">', '<stylesheet link="style.css">'],
            correct: 2
        }, {
            pytanie: "Który z tagów HTML tworzy nagłówek najwyższego poziomu?",
            answer: ['<head>', '<h6>', '<h1>', '<header>'],
            correct: 2
        }, {
            pytanie: "Jak odwołać się do elementu o id 'main' w CSS?",
            answer: ['#main', '.main', 'main', '$main'],
            correct: 0
        }, {
            pytanie: "Który operator porównania sprawdza wartość i typ w JS?",
            answer: ['==', '=', '===', '!='],
            correct: 2
        }, {
            pytanie: "Jakiego typu danych NIE ma w JavaScript?",
            answer: ['string', 'number', 'character', 'boolean'],
            correct: 2
        }, {
            pytanie: "Co robi metoda `querySelector()`?",
            answer: ['Zwraca pierwszy pasujący element', 'Usuwa element', 'Tworzy nowy znacznik', 'Przypisuje klasę'],
            correct: 0
        }, {
            pytanie: "Jak napisać komentarz jednoliniowy w JavaScript?",
            answer: ['<!-- komentarz -->', '# komentarz', '// komentarz', '/* komentarz */'],
            correct: 2
        }, {
            pytanie: "Jaki typ danych zwróci `typeof 123`?",
            answer: ['number', 'int', 'float', 'digit'],
            correct: 0
        }, {
            pytanie: "Która z metod usuwa ostatni element tablicy?",
            answer: ['shift()', 'pop()', 'remove()', 'delete()'],
            correct: 1
        }, {
            pytanie: "Które z tych stylów ustawi kolor tekstu?",
            answer: ['font-color', 'text-style', 'color', 'font-style'],
            correct: 2
        }, {
            pytanie: "Która metoda służy do tworzenia nowego okna alertu?",
            answer: ['msg()', 'prompt()', 'confirm()', 'alert()'],
            correct: 3
        }, {
            pytanie: "Jak zakończyć instrukcję w JavaScript?",
            answer: ['kropką', 'dwukropkiem', 'średnikiem', 'przecinkiem'],
            correct: 2
        }, {
            pytanie: "Który z tagów HTML tworzy hiperłącze?",
            answer: ['<a>', '<link>', '<href>', '<url>'],
            correct: 0
        }, {
            pytanie: "Jak nazywa sie robak?",
            answer: ['puszek', 'wiktor', 'bartek', 'kacper'],
            correct: 1
        }
        ];





        const $ = document.getElementById.bind(document);
        const end = $("end-btn")
        const next = $("next-btn");
        const start = $("start-btn")
        const quiz = $("quiz-container")
        const wynik = $("score")
        const wyswietlOdp = $("wyswietl-odp")
        const poprzedniaOdp = $("poprzednia-odp")
        const repeatTest = $("repeat-btn")

        const wyniki = []


        const timer1 = $("timer")
        const timer = $("time")
        let i = 1 // "PYTANIE NR.1,2,3,4"
        let score = 0
        let j = 0 // NUMER PYTANIA
        let k = 1 // konczenie quizy
        let ii = 0 // pytania
        let l = 0 // kolorowanie 

        let timerId = null;
        let time = 120;

        function StartTimer() {
            if (!timerId) {
                timer.hidden = false
                timer1.hidden = false
                time = 120;
                timerId = setInterval(() => {
                    console.log("ta ja timer i działam")
                    const min = Math.floor(time / 60);
                    const sec = time % 60;
                    timer.textContent = `${min}:${sec < 10 ? '0' + sec : sec}`;
                    time--;
                    if (time <= 0) {
                        timerId = null;
                        clearInterval(timerId);
                        timer.textContent = "Koniec czasu!"
                        for (let c = 1; c < 5; c++) {
                            document.getElementById("wybor" + c).disabled = true
                        }
                        next.style.display = 'none'
                        end.style.display = 'block'
                        return;
                    }
                }, 1000)
            };
        }
        function StopTimer() {
            clearInterval(timerId)
        }

        console.log("i", i, "j", j, "k", k, "ii", ii)
        start.addEventListener('click', function () {
            StartTimer();
            start.disabled = true
            next.style.display = 'inline-flex'
            quiz.style.display = 'flex'

            end.style.display = 'none'

            wyswietlOdp.hidden = true
            poprzedniaOdp.hidden = true

            for (ii = 0; ii < 4; ii++) {
                document.getElementById("answer" + ii).textContent = pytania[0].answer[ii];
            }

            document.getElementById("pytanie").textContent = pytania[0 + j].pytanie;
            document.getElementById("nr-pytania").textContent = "Pytanie nr. " + i + "/" + pytania.length;
            ii = 0
        })



        next.addEventListener('click', function pytanie() {

            const zaznaczone = document.querySelector('input[name="wybor"]:checked');
            if (zaznaczone) {
                console.log("i=" + i, "k=" + k, "j=" + j, "ii=" + ii)
                i++
                j++
                const wybranaOdp = parseInt(zaznaczone.value);

                if (wybranaOdp === pytania[j - 1].correct) {
                    score++;
                    wyniki.push(wybranaOdp)

                } else {
                    wyniki.push(wybranaOdp)
                }
                for (let iv = 1; iv <= (pytania[1].answer.length); iv++) { //jezeli ostatnia opcja ma sie nie odznaczac nalezy dodac po length - 1 (poprawnie działa bez niczego dopisanego)//  usuwanie zaznaczonych opcji z poprzedniego pytania
                    document.getElementById("wybor" + iv).checked = false
                }
                if (k < pytania.length) { // jezeli k jest krotsze od ilosci pytan 
                    document.getElementById("nr-pytania").textContent = "Pytanie nr. " + i + "/" + pytania.length // ustawia numer pytania u gory
                    document.getElementById("pytanie").textContent = pytania[j].pytanie; // wyswietla odpowiednie pytanie

                    for (ii = 0; ii < pytania[i - 1].answer.length; ii++) { // jezeli 
                        document.getElementById("answer" + ii).textContent = pytania[0 + j].answer[ii];
                    }
                    if (pytania[j].image) {
                        document.getElementById("zdjecie").src = pytania[j].image
                        document.getElementById("zdjecie").hidden = false
                    } else {
                        document.getElementById("zdjecie").hidden = true
                    }
                    ii = 0
                    k++
                    console.log("i=" + i, "k=" + k, "j=" + j, "ii=" + ii)

                    if (k == pytania.length) {


                        next.textContent = "Zakończ QUIZ"

                    }
                } else {
                    start.style.cursor = "pointer"
                    start.disabled = false
                    start.hidden = true
                    wyswietlOdp.textContent = 'Sprawdź odpowiedzi'
                    wynik.style.display = 'block'
                    wynik.textContent = "Twój wynik to: " + score + "/" + pytania.length;

                    quiz.style.display = 'none'
                    next.style.display = 'none'
                    wyswietlOdp.hidden = false
                    wyswietlOdp.disabled = false
                    repeatTest.hidden = false

                    timer1.hidden = true
                    timer.hidden = true
                    clearInterval(timerId);

                    k = 1
                    i = 1
                    j = 0
                    ii = 0
                    iv = 0
                    score = 0
                    console.log("KONIEC QUIZU START -", "i=" + i, "k=" + k, "j=" + j, "ii=" + ii)
                }
            } else {
                alert("Wybierz odpowiedz!")
                return;
            }
        });



        wyswietlOdp.addEventListener('click', function () {
            /* i = 1 // "PYTANIE NR.1,2,3,4"
             j = 0 // NUMER PYTANIA
             k = 1 // konczenie quizy
             ii = 0 // pytania*/
            repeatTest.hidden = false
            poprzedniaOdp.hidden = false
            poprzedniaOdp.disabled = true
            wyswietlOdp.textContent = "Zobacz następna odpowiedź"

            quiz.style.display = "flex" // pokazuje quiz
            wynik.style.display = 'none' // chowa wynik
            i++ // ustawia na pytanie nr 2 do naprawienia w kodzie
            j++ // ustawia numer pytania w bazie na 1 (1,2,3) to przydałoby sie naprawić
            console.log("START SPRAWDZANIA", "i=" + i, "k=" + k, "j=" + j, "ii=" + ii)
            k++
            if (k <= (pytania.length + 1)) { // jezeli k jest krotsze od ilosci pytan (pytania.length = 3(4), k = 1)

                document.getElementById("nr-pytania").textContent = "Pytanie nr. " + (i - 1) + "/" + pytania.length // ustawia numer pytania u gory
                document.getElementById("pytanie").textContent = pytania[j - 1].pytanie; // wyswietla odpowiednie pytanie 
                // DO TEJ PORY WSZYSTKO DZIAŁA
                for (ii = 0; ii < pytania[j - 1].answer.length; ii++) { // jezeli ii jest krótsze od ilosci odpowiedzi - 1, to wtedy (\ pytania[i-1].answer.length)
                    document.getElementById("answer" + ii).textContent = pytania[j - 1].answer[ii]; // wyswietla odpowiedzi z pytaniem o indexie J i odpowiedziami o indexie ii 
                    document.getElementById("wybor" + (ii + 1)).disabled = true
                    document.getElementById("answer" + ii).style.backgroundColor = "red"
                }
                document.getElementById("answer" + pytania[j - 1].correct).style.backgroundColor = "green"
                document.getElementById("answer" + wyniki[l]).style.backgroundColor = "orange"
                document.getElementById("answer" + wyniki[l]).textContent += " <-- Twoja odpowiedz "
                if (document.getElementById("answer" + pytania[j - 1].correct).style.backgroundColor = "orange") {
                    document.getElementById("answer" + pytania[j - 1].correct).style.backgroundColor = "green"
                }
                l++
                ii = 0

                console.log("START SPRWDZANIA 2", "i=" + i, "k=" + k, "j=" + j, "ii=" + ii, pytania.length)
                if (i - 1 < 2) {
                    poprzedniaOdp.disabled = true
                } else {
                    poprzedniaOdp.disabled = false
                }
                if (k - 1 == pytania.length) {
                    wyswietlOdp.disabled = true
                    return;
                } else {
                    wyswietlOdp.disabled = false
                }

            }

        });


        repeatTest.addEventListener('click', function () {

            wyniki.length = 0
            timerId = null;
            StartTimer();
            start.hidden = false
            start.textContent = "Rozpocznij quiz"
            repeatTest.hidden = true
            next.textContent = "Kolejne pytanie"
            wynik.style.display = 'none'
            wyswietlOdp.hidden = true
            //poprzedniaOdp.hidden = true
            for (let a = 0; a <= 3; a++) {
                console.log(a)
                document.getElementById("answer" + a).style.backgroundColor = 'transparent'
            }
            for (let b = 1; b <= 4; b++) {
                document.getElementById("wybor" + b).disabled = false
            }
            l = 0
            i = 1 // "PYTANIE NR.1,2,3,4"
            score = 0
            j = 0 // NUMER PYTANIA
            k = 1 // konczenie quizy
            ii = 0 // pytania                
            start.click()


        })
        poprzedniaOdp.addEventListener('click', function () {
            // ustawia na pytanie nr 2 do naprawienia w kodzie
            // ustawia numer pytania w bazie na 1 (1,2,3) to przydałoby sie naprawić
            l--
            j--
            i--
            k--
            console.log("START SPRAWDZANIA", "i=" + i, "k=" + k, "j=" + j, "ii=" + ii)
            if (k <= (pytania.length + 1)) { // jezeli k jest krotsze od ilosci pytan (pytania.length = 3(4), k = 1)

                document.getElementById("nr-pytania").textContent = "Pytanie nr. " + (i - 1) // ustawia numer pytania u gory
                document.getElementById("pytanie").textContent = pytania[j - 1].pytanie; // wyswietla odpowiednie pytanie

                for (ii = 0; ii < pytania[j - 1].answer.length; ii++) { // jezeli ii jest krótsze od ilosci odpowiedzi - 1, to wtedy (\ pytania[i-1].answer.length)
                    document.getElementById("answer" + ii).textContent = pytania[j - 1].answer[ii]; // wyswietla odpowiedzi z pytaniem o indexie J i odpowiedziami o indexie ii 
                }
                console.log("START SPRWDZANIA 2", "i=" + i, "k=" + k, "j=" + j, "ii=" + ii, pytania.length)

            }
            if (i - 1 < 2) {
                poprzedniaOdp.disabled = true
            } else {
                poprzedniaOdp.disabled = false
            }
            if (k - 1 == pytania.length) {
                wyswietlOdp.disabled = true
                return;
            } else {
                wyswietlOdp.disabled = false
            }
        })
        end.addEventListener('click', function () {
            start.style.cursor = "pointer"
            start.disabled = false
            start.hidden = true
            wyswietlOdp.textContent = 'Sprawdź odpowiedzi'
            wynik.style.display = 'block'
            wynik.textContent = "Twój wynik to: " + score + "/" + pytania.length;

            timer.hidden = true
            timer1.hidden = true
            quiz.style.display = 'none'
            next.style.display = 'none'
            wyswietlOdp.hidden = false
            wyswietlOdp.disabled = false
            repeatTest.hidden = false

            k = 1
            i = 1
            j = 0
            ii = 0
            iv = 0
            score = 0
            console.log("KONIEC QUIZU START -", "i=" + i, "k=" + k, "j=" + j, "ii=" + ii)
        })
    </script>
</body>

</html>